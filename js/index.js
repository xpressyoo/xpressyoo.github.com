$(function(){var a;var c=((60*$(window).height())/100)-55;var m=$(window).width();var e=(navigator.language)?navigator.language:navigator.userLanguage;var k="lib/fb.png";var h="lib/you.png";a=b();$(window).resize(function(){$("#mapcanvas,#mapcanvasno,#mapcanvasd").css("height",$(window).height());$("#mapcanvas,#mapcanvasno,#mapcanvasd").css("width",$(window).width());google.maps.event.trigger(a,"resize");a.setZoom(a.getZoom())});function b(){var q=setTimeout(r,10);if(navigator.geolocation){navigator.geolocation.getCurrentPosition(s,r)}function r(z){$("#mapcanvasno,#mapcanvas").css("display","none");var u=document.createElement("div");u.id="mapcanvasd";u.style.height=c+"px";u.style.width=m+"px";document.querySelector("#artmap").appendChild(u);var v=new google.maps.LatLng(51.7,-1.22728010000003);var y=[{stylers:[{visibility:"on"},{hue:"#007fff"},{saturation:-94},{lightness:69},{gamma:0.66}]}];var t={zoom:3,center:v,scrollwheel:false,mapTypeControl:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.ROADMAP};var w=new google.maps.Map(document.getElementById("mapcanvasd"),t);var x=new google.maps.Marker({position:v,map:w,icon:k,title:"I'm here!"});w.setOptions({styles:y})}function s(z){clearTimeout(q);$("#mapcanvasd,#mapcanvasno,#distanced,#distancena").css("display","none");var A=document.createElement("div");A.id="mapcanvas";A.style.height=c+"px";A.style.width=m+"px";document.querySelector("#artmap").appendChild(A);var u=new google.maps.LatLng(z.coords.latitude,z.coords.longitude);var E=new google.maps.LatLng(51.75527,-1.25894);var F=u;var C=google.maps.geometry.spherical.computeDistanceBetween(E,F);if(C>999){var x=Math.round((C/1000)*0.621371192)+' <span class="small">mi</span>';var C=Math.round(C/1000)+' <span class="small">kms</span>'}else{var x=Math.round(C*1.0936133)+' <span class="small">yd</span>';var C=Math.round(C)+' <span class="small">m</span>'}if(e==="en-GB"||e==="en-US"||e==="en-us"||e==="en-gb"){$("#distance").append(x)}else{$("#distance").append(C)}$("#distancea").append("Aerial distance between you and me.");var H=[{stylers:[{visibility:"on"},{hue:"#007fff"},{saturation:-94},{lightness:69},{gamma:0.66}]}];var I={zoom:2,center:E,mapTypeControl:false,scrollwheel:false,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeId:google.maps.MapTypeId.ROADMAP};var t=new google.maps.Map(document.getElementById("mapcanvas"),I);var w=new google.maps.Marker({position:u,map:t,icon:h,title:"You are here!"});var v=new google.maps.Marker({position:E,map:t,icon:k,title:"I'm here!"});var D=[E,F];var B=new google.maps.Polyline({path:D,strokeColor:"#aaa",strokeOpacity:0.6,geodesic:true,strokeWeight:5});var G=new google.maps.LatLngBounds();for(var y=0;y<D.length;y++){G.extend(D[y])}B.setMap(t);t.fitBounds(G);t.setOptions({styles:H});$("#whym").attr("title","This is the aerial distance between you and me.")}}var o={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var q=0;q<t.length;q++){var r=t[q].string;var s=t[q].prop;this.versionSearchString=t[q].versionSearch||t[q].identity;if(r){if(r.indexOf(t[q].subString)!=-1){return t[q].identity}}else{if(s){return t[q].identity}}}},searchVersion:function(r){var q=r.indexOf(this.versionSearchString);if(q==-1){return}return parseFloat(r.substring(q+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};o.init();var l=o.OS;var n=o.browser;var g,f;if(l==="Linux"&&n==="Chrome"){g=5}else{if(l==="Linux"&&n==="Firefox"){g=4}else{if(l==="Linux"&&n==="Opera"){g=4}}}if(l==="Mac"&&n==="Chrome"){g=3}else{if(l==="Mac"&&n==="Firefox"){g=3}else{if(l==="Mac"&&n==="Opera"){g=3}else{if(l==="Mac"&&n==="Safari"){g=2}}}}if(l==="Windows"&&n==="Chrome"){g=2}else{if(l==="Windows"&&n==="Firefox"){g=2}else{if(l==="Windows"&&n==="Opera"){g=2}else{if(l==="Windows"&&n==="Explorer"){g=1}}}}if(g==5){f="Excellent!"}else{if(g==4){f="Good!"}else{if(g==3){f="Not bad!"}else{if(g==2){f="Not too bad!"}else{if(g==1){f="No comment!"}}}}}$("#grade").append(" is "+g+"/5. "+f);$("#why,#whyb").attr("title",f+" You are using "+l+" with "+n);for(i=0;i<g;i++){stars='<i class="icon-star"></i>';$("#stars").append(stars)}for(i=0;i<5-g;i++){nostars='<i class="icon-star-empty"></i>';$("#nostars").append(nostars)}$("#infos").fadeIn(3000).css("display","block");if(n==="Safari"||n==="Explorer"||n==="Firefox"){$("#webcambtn").addClass("hidden")}var j=null;function p(q){if(q.code==1){console.log("You denied access to your camera. Bouhhh")}else{alert("Your browser sucks. Install Chrome or Opera.")}}window.URL=window.URL||window.webkitURL;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var d=document.querySelector("video");$("#webcambtn").live("click",function(){if(navigator.getUserMedia){navigator.getUserMedia({video:true},function(q){$("#artmap").addClass("hidden");$("#vid").removeClass("hidden");$("#webcambtn").addClass("webon");$("#webcambtn span").replaceWith("<span>Disconnect</span>");$("#webcambtn i").css("color","#2584d4");d.src=window.URL.createObjectURL(q);j=q},p)}else{alert("Your browser sucks. Install Chrome or Opera.")}});$("#webcambtn.webon").live("click",function(){$("#webcambtn").removeClass("webon");$("#webcambtn i").css("color","#999");$("#webcambtn span").replaceWith("<span>Say cheers</span>");$("#vid").addClass("hidden");$("#artmap").removeClass("hidden");d.pause();j.stop()})});
