$.fn.teletype=function(b){var e=this,c={animDelay:50},a=$.extend(c,b);$.each(a.text,function(f,g){setTimeout(function(){e.html(e.html()+g)},a.animDelay*f)})};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var d=new Date();var yr=2013;function goFullscreen(b){var a=document.getElementById(b);if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullScreen){a.webkitRequestFullScreen()}}}$(function(){$("#welcome").teletype({animDelay:20,text:"> New entry detected! Tracking initialized..."});$.getJSON("http://api.wipmania.com/jsonp?callback=?",function(q){var o=q.address.country;var j=q.longitude;var m=q.latitude;var r,g;if(o==="United Kingdom"){r="en";g="London at Night"}else{if(o==="Canada"){r="ca";g="Aurora Borealis Over Canada"}else{if(o==="Switzerland"||o==="France"||o==="Italy"||o==="Spain"){r="eu";g="South of Europe at Night"}else{if(o==="United States of America"||o==="USA"||o==="United States"){r="us";g="U.S. East Coast at Night"}else{r="ca";g="Aurora Borealis Over Canada"}}}}var e,b,k;var s=(navigator.language)?navigator.language:navigator.userLanguage;var a=s;if(s.indexOf("en")>-1){s="English";e="Hello and welcome on behalf of Florian!";b="Happy";k="I wish you a beautiful, magical new year"}else{if(s.indexOf("de")>-1){s="German";e="Hallo und herzlich willkommen!";b="Happy";k="Ein glückliches, erfolgreiches neues Jahr"}else{if(s.indexOf("it")>-1){s="Italian";e="Ciao e benvenuto!";b="Happy";k="Tutti i miei migliori auguri per questo nuovo anno"}else{if(s.indexOf("fr")>-1){s="French";e="Salut et bienvenue de la part de Florian!";b="Bonne Année";k="Tous mes voeux de bonheur pour cette nouvelle année"}else{if(s.indexOf("es")>-1){s="Spanish";e="Hola y bienvenidos!";b="Happy";k="Todos mis mejores deseos para este nuevo año"}else{if(s.indexOf("cn")>-1){s="Chinese";e="Hello and welcome on behalf of Florian!";b="Happy";k="I wish you a beautiful, magical new year"}else{if(s.indexOf("gr")>-1){s="Greek";e="Γεια σας και καλώς ήρθατε!";b="Happy";k="ΤIΣ ΚΑΛΥΤΕΡΕΣ ΕΥΧΕΣ ΓΙΑ ΤΟ ΝΕΟ ΕΤΟΣ"}else{if(s.indexOf("pl")>-1){s="Polish";e="Witam i zapraszam!";b="Happy";k="Wszystkie moje najlepsze życzenia dla nowego roku"}else{if(s.indexOf("jp")>-1){s="Japanese";e="Γεια σας και καλώς ήρθατε!";b="Happy";k="I wish you a beautiful, magical new year"}else{if(s.indexOf("in")>-1){s="Hindi";e="नमस्ते और आपका स्वागत है!";b="Happy";k="इस नए साल के लिए सभी शुभकामनाएं"}else{if(s.indexOf("ru")>-1){s="Russian";e="Здравствуйте и добро пожаловать!";b="Happy";k="Все мои наилучшие пожелания в новом году"}else{if(s.indexOf("kr")>-1){s="Korean";e="Hello and welcome on behalf of Florian!";b="Happy";k="I wish you a beautiful, magical new year"}else{s="English";e="Hello and welcome on behalf of Florian!";b="Happy";k="I wish you a beautiful, magical new year"}}}}}}}}}}}}var i=document.referrer;if(i===""){i="Direct link"}var h={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(w){for(var t=0;t<w.length;t++){var u=w[t].string;var v=w[t].prop;this.versionSearchString=w[t].versionSearch||w[t].identity;if(u){if(u.indexOf(w[t].subString)!=-1){return w[t].identity}}else{if(v){return w[t].identity}}}},searchVersion:function(u){var t=u.indexOf(this.versionSearchString);if(t==-1){return}return parseFloat(u.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};h.init();var f=h.OS;var p=h.browser;var c=h.version;var n=screen.width;var l=screen.height;setTimeout(function(){$("#referrer").teletype({animDelay:20,text:"> Request-Origin: "+i})},900);setTimeout(function(){$("#tech").teletype({animDelay:20,text:"> Tech footprint... OS: "+f+"... Browser: "+p+" "+c+"... Screen res: "+n+"x"+l+"(px)"})},2000);setTimeout(function(){$("#tracking").teletype({animDelay:20,text:"> Visitor located... latitude: "+m+" - longitude: "+j+"... Country: "+o})},4100);setTimeout(function(){$("#language").teletype({animDelay:20,text:"> Spoken language is "+s+"... "+e})},6400);setTimeout(function(){$("#inp").removeClass("hide").teletype({animDelay:35,text:"> Please type your first name and press enter:"})},8000);$("#form").submit(function(){var u=$("#fname").val().capitalize();if(u==="Aurelia"&&o==="France"){u="Chipie"}else{if(u==="Bérénice"&&o==="Switzerland"){u="Petite Soeur"}else{if(u==="Marcel"&&o==="Switzerland"){u="Papa"}else{if(u==="Béatrice"&&o==="Switzerland"){u="Maman"}}}}$("#loading").empty().append("Florian says:/$ Thank you "+u+". Generating message based on your location, language and first name...");setTimeout(function(){$("#nav,#footer,#wishes").hide("slow");$("#msg").fadeIn("slow").removeClass("hide").css({background:'url("'+r+'.jpg") no-repeat 0 0'});$("h1").append(b+" "+yr+" "+u+"!");$("h2").append(k+"...");$("#infots").append(g+" - NASA (ISS, 2012)")},2500);goFullscreen("msg");$("#play i").live("click",function(){$("#play").empty().append("Press Enter to close video").delay(1500).fadeOut("slow");setTimeout(function(){$("#msg").css("opacity","0.1");$("h1,h2,#details,#play").fadeOut("fast");$("#video").removeClass("hide").append('<iframe id="frame" width="800" height="450" src="https://www.youtube-nocookie.com/embed/Ip2ZGND1I9Q?showinfo=0&theme=dark&autoplay=1" frameborder="0" allowfullscreen></iframe>').fadeIn("slow")},1500)});function t(){$("#video").empty().addClass("hide");$("#play").empty().append('<i class="icon-play"></i>');$("h1,h2,#details,#play").fadeIn("fast");$("#msg").css("opacity","1")}$("#closevid").live("click",function(){t()});$(document).keyup(function(v){if(v.keyCode==13){t()}});return false})})});
